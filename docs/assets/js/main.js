"use strict";const inputElement=document.querySelector(".js_input_element"),searchBtn=document.querySelector(".js_search"),resetBtn=document.querySelector(".js_reset_btn"),logBtn=document.querySelector(".js_log_btn"),resetBtnFav=document.querySelector(".js_reset_fav"),listFavourite=document.querySelector(".js_favorite"),listCocktail=document.querySelector(".js_list_cocktail"),margatitaUrl="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita";let listCocktailData=[],listFavouriteData=[];const cocktailStored=JSON.parse(localStorage.getItem("favoriteCocktail"));cocktailStored&&(listFavouriteData=cocktailStored,renderFavorite(listFavourite));const listDataStored=JSON.parse(localStorage.getItem("coctail"));function handleClickBtn(t){t.preventDefault(),fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+inputElement.value).then(t=>t.json()).then(t=>{listCocktailData=t.drinks,inputElement.value="",renderResultCocktail(listCocktail)})}function renderResultCocktail(t){t.innerHTML="";for(const e of listCocktailData){const i=listFavouriteData.findIndex(t=>e.idDrink===t.idDrink);t.innerHTML+=-1===i?`<li class="js_liElement" id=${e.idDrink}>\n    <h2 class="js_title title_cocktail">${e.strDrink}</h2>\n    <img src=${e.strDrinkThumb} class="cocktail_img" title="${e.strDrink}"/>\n    <p class= "js_ingredients">${e.strIngredient1},${e.strIngredient2}, ${e.strIngredient3} </p>\n    </li>`:`<li class="js_liElement selected" id=${e.idDrink}>\n    <h2 class="js_title ">${e.strDrink}</h2>\n    <img src=${e.strDrinkThumb} class="cocktail_img" title="${e.strDrink}"/>\n    <p class= "js_ingredients">${e.strIngredient1},${e.strIngredient2}, ${e.strIngredient3} </p>\n    </li>`,addEventToCocktails()}}function renderFavorite(t){t.innerHTML="";for(const e of listFavouriteData)t.innerHTML+=`<li class="js_liElement" id=${e.idDrink}>\n    <h2 class="js_title title_cocktail">${e.strDrink}</h2>\n    <img src=${e.strDrinkThumb} class="cocktail_img" title="${e.strDrink}"/>\n    <p class= "js_ingredients">${e.strIngredient1}</p>\n    </li>`}function handleClick(t){const e=t.currentTarget.id,i=listCocktailData.find(t=>t.idDrink===e),n=listFavouriteData.findIndex(t=>t.idDrink===e);-1===n?(t.currentTarget.classList.add("selected"),listFavouriteData.push(i)):(t.currentTarget.classList.remove("selected"),listFavouriteData.splice(n,1)),renderFavorite(listFavourite),localStorage.setItem("favoriteCocktail",JSON.stringify(listFavouriteData))}function addEventToCocktails(){const t=document.querySelectorAll(".js_liElement");for(const e of t)e.addEventListener("click",handleClick)}function handleClickBtnReset(t){t.preventDefault(),inputElement.value="",location.reload()}function handleClickBtnLog(t){t.preventDefault()}function handleClickResetBtnFav(t){t.preventDefault(),listFavouriteData=[],listFavourite.innerHTML="",localStorage.removeItem("favoriteCocktail"),inputElement.value="",location.reload()}listDataStored?(listCocktailData=listDataStored,renderResultCocktail(listCocktail)):fetch(margatitaUrl).then(t=>t.json()).then(t=>{listCocktailData=t.drinks,renderResultCocktail(listCocktail),localStorage.setItem("coctail",JSON.stringify(listCocktailData))}),searchBtn.addEventListener("click",handleClickBtn),resetBtn.addEventListener("click",handleClickBtnReset),resetBtnFav.addEventListener("click",handleClickResetBtnFav),logBtn.addEventListener("click",handleClickBtnLog);